{"id":"Components/Login.js","dependencies":[{"name":"/parcel_blueprint/.babelrc","includedInParent":true,"mtime":1718293933214},{"name":"/parcel_blueprint/package.json","includedInParent":true,"mtime":1719935541155},{"name":"@babel/runtime/helpers/asyncToGenerator","parent":"/parcel_blueprint/src/Components/Login.js","resolved":"/parcel_blueprint/node_modules/@babel/runtime/helpers/asyncToGenerator.js"},{"name":"@babel/runtime/helpers/slicedToArray","parent":"/parcel_blueprint/src/Components/Login.js","resolved":"/parcel_blueprint/node_modules/@babel/runtime/helpers/slicedToArray.js"},{"name":"@babel/runtime/helpers/taggedTemplateLiteral","parent":"/parcel_blueprint/src/Components/Login.js","resolved":"/parcel_blueprint/node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"},{"name":"@babel/runtime/regenerator","parent":"/parcel_blueprint/src/Components/Login.js","resolved":"/parcel_blueprint/node_modules/@babel/runtime/regenerator/index.js"},{"name":"react","loc":{"line":1,"column":44,"index":44},"parent":"/parcel_blueprint/src/Components/Login.js","resolved":"/parcel_blueprint/node_modules/react/index.js"},{"name":"styled-components","loc":{"line":2,"column":19,"index":72},"parent":"/parcel_blueprint/src/Components/Login.js","resolved":"/parcel_blueprint/node_modules/styled-components/dist/styled-components.browser.esm.js"},{"name":"axios","loc":{"line":3,"column":18,"index":111},"parent":"/parcel_blueprint/src/Components/Login.js","resolved":"/parcel_blueprint/node_modules/axios/index.js"},{"name":"./AppProvider","loc":{"line":4,"column":27,"index":147},"parent":"/parcel_blueprint/src/Components/Login.js","resolved":"/parcel_blueprint/src/Components/AppProvider.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Login = Login;\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\nvar _taggedTemplateLiteral2 = _interopRequireDefault(require(\"@babel/runtime/helpers/taggedTemplateLiteral\"));\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\nvar _react = _interopRequireWildcard(require(\"react\"));\nvar _styledComponents = _interopRequireDefault(require(\"styled-components\"));\nvar _axios = _interopRequireDefault(require(\"axios\"));\nvar _AppProvider = require(\"./AppProvider\");\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6;\nfunction _getRequireWildcardCache(e) { if (\"function\" != typeof WeakMap) return null; var r = new WeakMap(), t = new WeakMap(); return (_getRequireWildcardCache = function (e) { return e ? t : r; })(e); }\nfunction _interopRequireWildcard(e, r) { if (!r && e && e.__esModule) return e; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return { default: e }; var t = _getRequireWildcardCache(r); if (t && t.has(e)) return t.get(e); var n = { __proto__: null }, a = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var u in e) if (\"default\" !== u && {}.hasOwnProperty.call(e, u)) { var i = a ? Object.getOwnPropertyDescriptor(e, u) : null; i && (i.get || i.set) ? Object.defineProperty(n, u, i) : n[u] = e[u]; } return n.default = e, t && t.set(e, n), n; }\nfunction _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }\nvar StyledLogin = _styledComponents.default.div(_templateObject || (_templateObject = (0, _taggedTemplateLiteral2.default)([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n  height: 100vh;\\n  background-color: #f0f0f0;\\n\"])));\nvar FormContainer = _styledComponents.default.div(_templateObject2 || (_templateObject2 = (0, _taggedTemplateLiteral2.default)([\"\\n  display: flex;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n\"])));\nvar LoginForm = _styledComponents.default.form(_templateObject3 || (_templateObject3 = (0, _taggedTemplateLiteral2.default)([\"\\n  display: flex;\\n  flex-direction: column;\\n  background-color: #fff;\\n  padding: 20px;\\n  border-radius: 8px;\\n  box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\\n  width: 300px;\\n  margin-top: 20px;\\n\"])));\nvar FormInput = _styledComponents.default.input(_templateObject4 || (_templateObject4 = (0, _taggedTemplateLiteral2.default)([\"\\n  margin-bottom: 15px;\\n  padding: 10px;\\n  font-size: 16px;\\n  border: 1px solid #ccc;\\n  border-radius: 4px;\\n\"])));\nvar FormButton = _styledComponents.default.button(_templateObject5 || (_templateObject5 = (0, _taggedTemplateLiteral2.default)([\"\\n  padding: 10px;\\n  font-size: 16px;\\n  color: #fff;\\n  background-color: #9F3434;\\n  border: none;\\n  border-radius: 4px;\\n  cursor: pointer;\\n  transition: background-color 0.3s ease;\\n\\n  &:hover {\\n    background-color: #7f2828;\\n  }\\n\"])));\nvar ErrorMessage = _styledComponents.default.p(_templateObject6 || (_templateObject6 = (0, _taggedTemplateLiteral2.default)([\"\\n  color: red;\\n  font-size: 14px;\\n\"])));\nfunction Login() {\n  var _useState = (0, _react.useState)(true),\n    _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n    isLogin = _useState2[0],\n    setIsLogin = _useState2[1];\n  var _useState3 = (0, _react.useState)(''),\n    _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n    username = _useState4[0],\n    setUsername = _useState4[1];\n  var _useState5 = (0, _react.useState)(''),\n    _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n    password = _useState6[0],\n    setPassword = _useState6[1];\n  var _useState7 = (0, _react.useState)(''),\n    _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n    email = _useState8[0],\n    setEmail = _useState8[1];\n  var _useState9 = (0, _react.useState)(''),\n    _useState10 = (0, _slicedToArray2.default)(_useState9, 2),\n    name = _useState10[0],\n    setName = _useState10[1];\n  var _useState11 = (0, _react.useState)(''),\n    _useState12 = (0, _slicedToArray2.default)(_useState11, 2),\n    address = _useState12[0],\n    setAddress = _useState12[1];\n  var _useState13 = (0, _react.useState)(''),\n    _useState14 = (0, _slicedToArray2.default)(_useState13, 2),\n    error = _useState14[0],\n    setError = _useState14[1];\n  var _useContext = (0, _react.useContext)(_AppProvider.AppContext),\n    login = _useContext.login;\n  var toggleForm = function toggleForm() {\n    setIsLogin(!isLogin);\n    setError('');\n    setUsername('');\n    setPassword('');\n    setEmail('');\n    setName('');\n    setAddress('');\n  };\n  var handleLogin = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(event) {\n      var response, basicAuthString;\n      return _regenerator.default.wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            event.preventDefault();\n            _context.prev = 1;\n            _context.next = 4;\n            return _axios.default.post('https://veomcourse.com:5000/api/login', {\n              username: username,\n              password: password\n            });\n          case 4:\n            response = _context.sent;\n            console.log(response.data);\n            localStorage.setItem('userID', response.data.apiResponse.id);\n            if (response.data.apiResponse.message === 'Valid credentials') {\n              console.log(response.data.apiResponse.message);\n              basicAuthString = btoa(\"\".concat(username, \":\").concat(password));\n              localStorage.setItem('basicAuth', basicAuthString);\n              localStorage.setItem('userID', response.data.apiResponse.id); // Store user ID in localStorage\n              // Set the user object with the id\n              window.location.href = 'https://veomcourse.com/dashboard';\n            } else {\n              setError('Invalid username or password');\n            }\n            console.log('Login successful', response.data);\n            setError('Login successful');\n            // Redirect to dashboard upon successful login\n            window.location.href = 'https://veomcourse.com/dashboard';\n            _context.next = 17;\n            break;\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](1);\n            console.error('Error logging in:', _context.t0);\n            setError('Invalid username or password');\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[1, 13]]);\n    }));\n    return function handleLogin(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  var handleSignup = /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(event) {\n      var response;\n      return _regenerator.default.wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            event.preventDefault();\n            _context2.prev = 1;\n            _context2.next = 4;\n            return _axios.default.post('https://veomcourse.com:5000/api/signup', {\n              username: username,\n              password: password,\n              email: email,\n              name: name,\n              address: address\n            });\n          case 4:\n            response = _context2.sent;\n            console.log('Signup successful', response.data);\n            setError('User created successfully');\n            setUsername('');\n            setPassword('');\n            setEmail('');\n            setName('');\n            setAddress('');\n            _context2.next = 18;\n            break;\n          case 14:\n            _context2.prev = 14;\n            _context2.t0 = _context2[\"catch\"](1);\n            console.error('There was an error creating the user!', _context2.t0);\n            setError('Error creating user');\n          case 18:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2, null, [[1, 14]]);\n    }));\n    return function handleSignup(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  return /*#__PURE__*/_react.default.createElement(StyledLogin, null, /*#__PURE__*/_react.default.createElement(FormContainer, null, isLogin ? /*#__PURE__*/_react.default.createElement(LoginForm, {\n    onSubmit: handleLogin\n  }, /*#__PURE__*/_react.default.createElement(\"h2\", null, \"Login\"), /*#__PURE__*/_react.default.createElement(FormInput, {\n    type: \"text\",\n    placeholder: \"Username\",\n    value: username,\n    onChange: function onChange(e) {\n      return setUsername(e.target.value);\n    },\n    required: true\n  }), /*#__PURE__*/_react.default.createElement(FormInput, {\n    type: \"password\",\n    placeholder: \"Password\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    required: true\n  }), error && /*#__PURE__*/_react.default.createElement(ErrorMessage, null, error), /*#__PURE__*/_react.default.createElement(FormButton, {\n    type: \"submit\"\n  }, \"Login\"), /*#__PURE__*/_react.default.createElement(FormButton, {\n    type: \"button\",\n    onClick: toggleForm\n  }, \"Don't have an account? Sign Up\")) : /*#__PURE__*/_react.default.createElement(LoginForm, {\n    onSubmit: handleSignup\n  }, /*#__PURE__*/_react.default.createElement(\"h2\", null, \"Sign Up\"), /*#__PURE__*/_react.default.createElement(FormInput, {\n    type: \"text\",\n    placeholder: \"Username\",\n    value: username,\n    onChange: function onChange(e) {\n      return setUsername(e.target.value);\n    },\n    required: true\n  }), /*#__PURE__*/_react.default.createElement(FormInput, {\n    type: \"password\",\n    placeholder: \"Password\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    required: true\n  }), /*#__PURE__*/_react.default.createElement(FormInput, {\n    type: \"email\",\n    placeholder: \"Email\",\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    required: true\n  }), /*#__PURE__*/_react.default.createElement(FormInput, {\n    type: \"text\",\n    placeholder: \"Name\",\n    value: name,\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    required: true\n  }), /*#__PURE__*/_react.default.createElement(FormInput, {\n    type: \"text\",\n    placeholder: \"Address\",\n    value: address,\n    onChange: function onChange(e) {\n      return setAddress(e.target.value);\n    },\n    required: true\n  }), error && /*#__PURE__*/_react.default.createElement(ErrorMessage, null, error), /*#__PURE__*/_react.default.createElement(FormButton, {\n    type: \"submit\"\n  }, \"Sign Up\"), /*#__PURE__*/_react.default.createElement(FormButton, {\n    type: \"button\",\n    onClick: toggleForm\n  }, \"Already have an account? Login\"))));\n}"},"sourceMaps":null,"error":null,"hash":"ff9d3c4b41e880173275c78761a81bc0","cacheData":{"env":{}}}